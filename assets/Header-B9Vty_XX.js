import{r as a,u as w,j as s,L as p}from"./index-BP9G5J2Q.js";import{l as v}from"./logo-blue-DO1S9uVt.js";import{o as b,g as y,d as u,b as m,a as i,j as N,c as C,k as E}from"./firebase-CHsPK2My.js";function R({logo:f}){const[n,t]=a.useState(""),[l,r]=a.useState(!1),o=a.useRef(null),h=w(),g=()=>{h("/")};a.useEffect(()=>{const e=b(i,async c=>{if(c){const d=await y(u(m,"users",c.uid));d.exists()&&t(d.data().nickname)}else t("")});return()=>e()},[]),a.useEffect(()=>{const e=c=>{o.current&&!o.current.contains(c.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);const x=async()=>{try{await N(i),t(""),r(!1)}catch(e){console.error("로그아웃 오류:",e.message)}},j=async()=>{if(window.confirm("계정을 정말로 탈퇴하시겠습니까? 이 작업은 되돌릴 수 없습니다."))try{const e=i.currentUser;e&&(await C(u(m,"users",e.uid)),await E(e),t(""),r(!1),alert("계정이 성공적으로 삭제되었습니다."))}catch(e){console.error("계정 삭제 오류:",e.message),alert("계정 삭제 중 오류가 발생했습니다. 다시 시도해 주세요.")}},k=n.length>3?`${n.slice(0,3)}...`:n;return s.jsx("div",{id:"Header",children:s.jsxs("div",{className:"Header_inner",children:[s.jsx("img",{src:f||v,alt:"logo",onClick:g}),n?s.jsxs("div",{className:`user-menu ${n?"logged-in":""}`,ref:o,children:[s.jsxs("div",{className:"user-menu-main",onClick:()=>r(!l),children:[k,s.jsx("span",{className:"material-symbols-rounded",children:"keyboard_arrow_down"})]}),l&&s.jsxs("ul",{className:"dropdown-menu",children:[s.jsx("li",{onClick:x,children:"로그아웃"}),s.jsx("li",{onClick:j,children:"계정 탈퇴하기"})]})]}):s.jsx(p,{to:"/login",children:"로그인 / 회원가입"})]})})}export{R as H};
