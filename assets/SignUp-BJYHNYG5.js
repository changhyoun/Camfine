import{r as t,u as W,j as s,L as N}from"./index-B6VN-3tb.js";import{l as z}from"./logo-blue-BTOPC52m.js";import{e as v,b as g,q as S,w as b,f as C,h as T,a as Z,s as I,d as J}from"./firebase-CHsPK2My.js";import{G as O}from"./GoMain-2Vn40jAR.js";const X="/Camfine/assets/SignUp_pop-H7RowV2n.mp4";function is(){const[m,k]=t.useState(""),[d,E]=t.useState(""),[p,P]=t.useState(""),[r,U]=t.useState(""),[u,V]=t.useState(""),[h,$]=t.useState(!1),[x,L]=t.useState(!1),[f,o]=t.useState(""),[j,q]=t.useState(!1),[B,D]=t.useState(0),M=W(),l=a=>{const e=document.querySelector(a);e&&(e.style.display="none",e.style.opacity="0")},A=()=>{$(!h)},R=()=>{L(!x)},i=a=>{const e=document.querySelector(a);e&&(e.style.display="block",e.style.opacity="1")},y=async()=>{const a=`${m.trim()}@${d.trim()}`;if(!(!m||!d))try{const e=v(g,"users"),c=S(e,b("email","==",a));(await C(c)).empty?o(""):(o("ì¤‘ë³µëœ ì´ë©”ì¼ì´ì˜ˆìš”â—"),i(".email .same_mail"))}catch(e){console.error("Firestore ì´ë©”ì¼ í™•ì¸ ì¤‘ ì˜¤ë¥˜:",e.message),o("ì´ë©”ì¼ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}},F=async a=>{a.preventDefault(),document.querySelectorAll(".no_input, .no_fit, .same_mail").forEach(n=>{n.style.display="none",n.style.opacity="0"});let e=!0;const c=`${m.trim()}@${d.trim()}`;try{const n=v(g,"users"),_=S(n,b("email","==",c));(await C(_)).empty||(o("ì¤‘ë³µëœ ì´ë©”ì¼ì´ì˜ˆìš”â—"),i(".email .same_mail"),e=!1)}catch(n){console.error("Firestore ì´ë©”ì¼ í™•ì¸ ì¤‘ ì˜¤ë¥˜:",n.message),o("ì´ë©”ì¼ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."),i(".email .same_mail"),e=!1}if(!m||!d?(i(".email .no_input"),e=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)||(i(".email .no_fit"),e=!1),f&&(i(".email .same_mail"),e=!1),p||(i(".nickname .no_input"),e=!1),r||(i(".password .no_input"),e=!1),u||(i(".password_re .no_input"),e=!1),r&&!/^(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(r)&&(i(".password .no_fit"),e=!1),r!==u&&(i(".password_re .no_fit"),e=!1),!!e)try{const _=(await T(Z,c,r)).user;await I(J(g,"users",_.uid),{nickname:p,email:c}),D(w=>w+1),q(!0)}catch(n){console.error("Error creating user:",n.message),alert("íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")}},G=()=>{window.location.reload()},H=a=>{const e=a.target;e.currentTime=e.duration/2},K=()=>{M("/")};return s.jsxs("div",{id:"SignUp",children:[j&&s.jsxs("div",{className:`signup_suc ${j?"show":""}`,children:[s.jsxs("div",{className:"signup_suc_pop",children:[s.jsx("video",{src:X,autoPlay:!0,muted:!0,onLoadedMetadata:H,onEnded:a=>a.target.pause()},B),s.jsxs("h3",{children:[s.jsxs("span",{children:[p,"ë‹˜"]})," íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",s.jsx("br",{}),s.jsx(N,{to:"/Login",children:"ë¡œê·¸ì¸ í˜ì´ì§€"}),"ë¡œ ì´ë™í•´ë³´ì„¸ìš”!"]})]}),s.jsx("span",{className:"material-symbols-rounded",onClick:G,children:"close"})]}),s.jsxs("div",{className:"SignUp_Warp",children:[s.jsx(O,{}),s.jsx("img",{src:z,alt:"logoBlue",onClick:K}),s.jsxs("p",{className:"sign_m_p",children:["íšŒì›ê°€ì…ì„ ì§„í–‰í•˜ì…¨ë‚˜ìš”? ",s.jsx(N,{to:"/Login",children:"ë¡œê·¸ì¸ í•´ë³´ì„¸ìš”!"})]}),s.jsxs("form",{onSubmit:F,children:[s.jsxs("div",{className:"email",children:[s.jsx("legend",{children:"ì´ë©”ì¼"}),s.jsxs("div",{className:"email_box",children:[s.jsx("input",{type:"text",placeholder:"ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.",value:m,className:"SignUp_input",onChange:a=>{k(a.target.value),o(""),l(".email .no_input"),l(".email .no_fit")},onBlur:y}),"@",s.jsx("input",{type:"text",placeholder:"ë„ë©”ì¸ì„ ì…ë ¥í•˜ì„¸ìš”.",value:d,className:"SignUp_input",onChange:a=>{E(a.target.value),o(""),l(".email .no_input"),l(".email .no_fit")},onBlur:y})]}),s.jsx("p",{className:"no_input",children:"ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”â—"}),s.jsx("p",{className:"no_fit",children:"ì´ë©”ì¼ í˜•ì‹ì´ ë§ì§€ ì•Šì•„ìš”â—"}),f&&s.jsx("p",{className:"same_mail",children:f})]}),s.jsxs("div",{className:"nickname",children:[s.jsx("legend",{children:"ë‹‰ë„¤ì„"}),s.jsxs("div",{className:"nickname_box",children:[s.jsx("span",{className:"material-symbols-rounded",children:"person"}),s.jsx("input",{className:"box SignUp_input",type:"text",placeholder:"ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”.",value:p,onChange:a=>{P(a.target.value),l(".nickname .no_input")}})]}),s.jsx("p",{className:"no_input",children:"ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”â—"})]}),s.jsxs("div",{className:"password",children:[s.jsx("legend",{children:"ë¹„ë°€ë²ˆí˜¸"}),s.jsxs("div",{className:"nickname_box",children:[s.jsx("span",{className:"material-symbols-rounded",children:"lock"}),s.jsx("span",{className:"material-symbols-rounded",onClick:A,children:h?"visibility_off":"visibility"}),s.jsx("input",{type:h?"text":"password",className:"SignUp_input",placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.",value:r,onChange:a=>{U(a.target.value),l(".password .no_input"),l(".password .no_fit")}})]}),s.jsx("p",{children:"ğŸ”‘ ë¹„ë°€ë²ˆí˜¸ ì–‘ì‹ : 8ìë¦¬ ì´ìƒ ã† íŠ¹ìˆ˜ë¬¸ì í¬í•¨ "}),s.jsx("p",{className:"no_input",children:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”â—"}),s.jsx("p",{className:"no_fit",children:"ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ì´ ë§ì§€ ì•Šì•„ìš”â—"})]}),s.jsxs("div",{className:"password_re",children:[s.jsx("legend",{children:"ë¹„ë°€ë²ˆí˜¸ ì¬í™•ì¸"}),s.jsxs("div",{className:"nickname_box",children:[s.jsx("span",{className:"material-symbols-rounded",children:"lock"}),s.jsx("span",{className:"material-symbols-rounded",onClick:R,children:x?"visibility_off":"visibility"}),s.jsx("input",{className:"SignUp_input",type:x?"text":"password",placeholder:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.",value:u,onChange:a=>{V(a.target.value),l(".password_re .no_input"),l(".password_re .no_fit")}})]}),s.jsx("p",{className:"no_input",children:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¬ì…ë ¥í•´ì£¼ì„¸ìš”â—"}),s.jsx("p",{className:"no_fit",children:"ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•Šì•„ìš”â—"})]}),s.jsx("button",{type:"submit",className:"signup_btn",children:"íšŒì›ê°€ì…"})]})]})]})}export{is as default};
