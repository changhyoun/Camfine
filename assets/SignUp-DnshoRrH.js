import{r as n,u as I,j as s,L as N}from"./index-Dl3JXMR4.js";import{l as T,e as v,b as j,q as S,w as b,f as C,h as Z,a as F,s as J,d as O}from"./firebase-C-qr456J.js";import{G as X}from"./GoMain-tGHm9FFp.js";const Y="/Camfine/assets/SignUp_pop-H7RowV2n.mp4";function is(){const[d,k]=n.useState(""),[m,E]=n.useState(""),[p,P]=n.useState(""),[r,U]=n.useState(""),[u,V]=n.useState(""),[h,$]=n.useState(!1),[x,L]=n.useState(!1),[f,o]=n.useState(""),[y,q]=n.useState(!1),[B,D]=n.useState(0),M=I(),t=a=>{const e=document.querySelector(a);e&&(e.style.display="none",e.style.opacity="0")},A=()=>{$(!h)},R=()=>{L(!x)},i=a=>{const e=document.querySelector(a);e&&(e.style.display="block",e.style.opacity="1")},g=async()=>{const a=`${d.trim()}@${m.trim()}`;if(!(!d||!m))try{const e=v(j,"users"),c=S(e,b("email","==",a));(await C(c)).empty?o(""):(o("중복된 이메일이예요❗"),i(".email .same_mail"))}catch{o("이메일 확인 중 오류가 발생했습니다.")}},G=async a=>{a.preventDefault(),document.querySelectorAll(".no_input, .no_fit, .same_mail").forEach(l=>{l.style.display="none",l.style.opacity="0"});let e=!0;const c=`${d.trim()}@${m.trim()}`;try{const l=v(j,"users"),_=S(l,b("email","==",c));(await C(_)).empty||(o("중복된 이메일이예요❗"),i(".email .same_mail"),e=!1)}catch{o("이메일 확인 중 오류가 발생했습니다."),i(".email .same_mail"),e=!1}if(!d||!m?(i(".email .no_input"),e=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)||(i(".email .no_fit"),e=!1),f&&(i(".email .same_mail"),e=!1),p||(i(".nickname .no_input"),e=!1),r||(i(".password .no_input"),e=!1),u||(i(".password_re .no_input"),e=!1),r&&!/^(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(r)&&(i(".password .no_fit"),e=!1),r!==u&&(i(".password_re .no_fit"),e=!1),!!e)try{const _=(await Z(F,c,r)).user;await J(O(j,"users",_.uid),{nickname:p,email:c}),D(w=>w+1),q(!0)}catch{alert("회원가입 중 오류가 발생했습니다. 다시 시도해주세요.")}},H=()=>{window.location.reload()},K=a=>{const e=a.target;e.currentTime=e.duration/2},Q=()=>{M("/")},W=()=>{window.location.reload()};return s.jsxs("div",{id:"SignUp",children:[y&&s.jsxs("div",{className:`signup_suc ${y?"show":""}`,children:[s.jsxs("div",{className:"signup_suc_pop",children:[s.jsx("video",{src:Y,autoPlay:!0,playsInline:!0,muted:!0,onLoadedMetadata:K,onEnded:a=>a.target.pause()},B),s.jsxs("h3",{children:[s.jsxs("span",{children:[p,"님"]})," 회원가입이 완료되었습니다.",s.jsx("br",{}),s.jsx(N,{to:"#",onClick:W,children:"로그인 페이지"}),"로 이동해보세요!"]})]}),s.jsx("span",{className:"material-symbols-rounded",onClick:H,children:"close"})]}),s.jsxs("div",{className:"SignUp_Warp",children:[s.jsx(X,{}),s.jsx("img",{src:T,alt:"logoBlue",onClick:Q}),s.jsxs("p",{className:"sign_m_p",children:["회원가입을 진행하셨나요? ",s.jsx(N,{to:"/Login",children:"로그인 해보세요!"})]}),s.jsxs("form",{onSubmit:G,children:[s.jsxs("div",{className:"email",children:[s.jsx("legend",{children:"이메일"}),s.jsxs("div",{className:"email_box",children:[s.jsx("input",{type:"text",placeholder:"이메일을 입력하세요.",value:d,className:"SignUp_input",onChange:a=>{k(a.target.value),o(""),t(".email .no_input"),t(".email .no_fit")},onBlur:g}),"@",s.jsx("input",{type:"text",placeholder:"도메인을 입력하세요.",value:m,className:"SignUp_input",onChange:a=>{E(a.target.value),o(""),t(".email .no_input"),t(".email .no_fit")},onBlur:g})]}),s.jsx("p",{className:"no_input",children:"이메일을 입력해주세요❗"}),s.jsx("p",{className:"no_fit",children:"이메일 형식이 맞지 않아요❗"}),f&&s.jsx("p",{className:"same_mail",children:f})]}),s.jsxs("div",{className:"nickname",children:[s.jsx("legend",{children:"닉네임"}),s.jsxs("div",{className:"nickname_box",children:[s.jsx("span",{className:"material-symbols-rounded",children:"person"}),s.jsx("input",{className:"box SignUp_input",type:"text",placeholder:"닉네임을 입력하세요.",value:p,onChange:a=>{P(a.target.value),t(".nickname .no_input")}})]}),s.jsx("p",{className:"no_input",children:"닉네임을 입력해주세요❗"})]}),s.jsxs("div",{className:"password",children:[s.jsx("legend",{children:"비밀번호"}),s.jsxs("div",{className:"nickname_box",children:[s.jsx("span",{className:"material-symbols-rounded",children:"lock"}),s.jsx("span",{className:"material-symbols-rounded",onClick:A,children:h?"visibility_off":"visibility"}),s.jsx("input",{type:h?"text":"password",className:"SignUp_input",placeholder:"비밀번호를 입력하세요.",value:r,onChange:a=>{U(a.target.value),t(".password .no_input"),t(".password .no_fit")}})]}),s.jsx("p",{children:"🔑 비밀번호 양식 : 8자리 이상 ㆍ 특수문자 포함 "}),s.jsx("p",{className:"no_input",children:"비밀번호를 입력해주세요❗"}),s.jsx("p",{className:"no_fit",children:"비밀번호 형식이 맞지 않아요❗"})]}),s.jsxs("div",{className:"password_re",children:[s.jsx("legend",{children:"비밀번호 재확인"}),s.jsxs("div",{className:"nickname_box",children:[s.jsx("span",{className:"material-symbols-rounded",children:"lock"}),s.jsx("span",{className:"material-symbols-rounded",onClick:R,children:x?"visibility_off":"visibility"}),s.jsx("input",{className:"SignUp_input",type:x?"text":"password",placeholder:"비밀번호를 다시 입력하세요.",value:u,onChange:a=>{V(a.target.value),t(".password_re .no_input"),t(".password_re .no_fit")}})]}),s.jsx("p",{className:"no_input",children:"비밀번호를 재입력해주세요❗"}),s.jsx("p",{className:"no_fit",children:"비밀번호가 맞지 않아요❗"})]}),s.jsx("button",{type:"submit",className:"signup_btn",children:"회원가입"})]})]})]})}export{is as default};
